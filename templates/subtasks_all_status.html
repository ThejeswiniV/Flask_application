{% extends "base_layout.html" %}

{% block title %}
View Sub Task Status
{% endblock %}

{% block main %}
<div class="container-fluid">
  <ul class="nav nav-tabs nav-justified" id="myTabs" role="tablist" style="justify-content: center;">
    <li class="nav-item">
      <a class="nav-link active bg-danger" id="tab1" data-toggle="tab" href="#tab-content1">Incomplete Subtasks</a>
    </li>
    <li class="nav-item">
      <a class="nav-link bg-warning" id="tab2" data-toggle="tab" href="#tab-content2">Subtasks In Progress</a>
    </li>
    <li class="nav-item">
      <a class="nav-link bg-success" id="tab3" data-toggle="tab" href="#tab-content3">Completed Subtasks</a>
    </li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane fade show active" id="tab-content1">
        <!-- Table content for Tab 1 -->
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th scope="col">Subtask ID</th>
              <th scope="col">Subtask Name</th>
              <th scope="col">Sub Task Description</th>
              <th scope="col">Assigned To</th>
              <th scope="col">Start Date</th>
              <th scope="col">End Date</th>
              <th scope="col">Created By</th>
              <th scope="col">Creation Date</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for i_subtask in incomplete_subtasks %}
            <tr>
              <td scope="row">{{ i_subtask.id }}</td>
              <td>{{ i_subtask.SubtaskName }}</td>
              <td>{{i_subtask.SubtaskDescription }}</td>
              <td>{{ i_subtask.AssignedTo }}</td>
              <td>{{ i_subtask.StartDate }}</td>
              <td>{{ i_subtask.EndDate }}</td>
              <td>{{ i_subtask.CreatedBy.split('@')[0].lower() }}</td>
              <td>{{ i_subtask.CreationDate.date() }}</td>
              <td>{{ i_subtask.Status }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="tab-content2">
        <!-- Table content for Tab 2 -->
        <table class="table table-striped table-bordered table-hover">
          <thead>
            <tr>
              <th scope="col">Subtask ID</th>
              <th scope="col">Subtask Name</th>
              <th scope="col">Sub Task Description</th>
              <th scope="col">Assigned To</th>
              <th scope="col">Start Date</th>
              <th scope="col">End Date</th>
              <th scope="col">Created By</th>
              <th scope="col">Creation Date</th>
              <th scope="col">Status</th>
            </tr>
          </thead>
          <tbody>
            {% for p_subtask in in_progress_subtasks %}
            <tr>
              <td scope="row">{{ p_subtask.id }}</td>
              <td>{{ p_subtask.SubtaskName }}</td>
              <td>{{p_subtask.SubtaskDescription }}</td>
              <td>{{ p_subtask.AssignedTo }}</td>
              <td>{{ p_subtask.StartDate }}</td>
              <td>{{ p_subtask.EndDate }}</td>
              <td>{{ p_subtask.CreatedBy.split('@')[0].lower() }}</td>
              <td>{{ p_subtask.CreationDate.date() }}</td>
              <td>{{ p_subtask.Status }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
    </div>

    <div class="tab-pane fade" id="tab-content3">
    <!-- Table content for Tab 3 -->
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <tr>
          <th scope="col">Subtask ID</th>
          <th scope="col">Subtask Name</th>
          <th scope="col">Sub Task Description</th>
          <th scope="col">Assigned To</th>
          <th scope="col">Start Date</th>
          <th scope="col">End Date</th>
          <th scope="col">Created By</th>
          <th scope="col">Creation Date</th>
          <th scope="col">Status</th>
        </tr>
      </thead>
      <tbody>
        {% for c_subtask in completed_subtasks %}
        <tr>
          <td scope="row">{{ c_subtask.id }}</td>
          <td>{{ c_subtask.SubtaskName }}</td>
          <td>{{c_subtask.SubtaskDescription }}</td>
          <td>{{ c_subtask.AssignedTo }}</td>
          <td>{{ c_subtask.StartDate }}</td>
          <td>{{ c_subtask.EndDate }}</td>
          <td>{{ c_subtask.CreatedBy.split('@')[0].lower() }}</td>
          <td>{{ c_subtask.CreationDate.date() }}</td>
          <td>{{ c_subtask.Status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    </div>
  </div>
</div>
{% endblock %}